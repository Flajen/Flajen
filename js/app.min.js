(()=>{"use strict";!function(e){let t=new Image;t.onload=t.onerror=function(){1==(2==t.height)?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};e.any()?document.body.classList.add("_touch"):document.body.classList.add("_pc")})(),(()=>{const e=document.querySelector(".icon-menu"),t=document.querySelector(".menu__body"),o=document.querySelector(".header__wrapper");e&&e.addEventListener("click",(function(n){document.body.classList.toggle("lock"),o.classList.toggle("active"),e.classList.toggle("active"),t.classList.toggle("active")}))})(),(()=>{function e(e,t){t.forEach((e=>{e.classList.remove("active")})),e.forEach((e=>{e.classList.remove("active")}))}document.querySelectorAll("[data-tabs]").forEach((t=>function(t){const o=t.querySelectorAll("[data-tab-button]"),n=t.querySelectorAll("[data-tab-content]");let r;e(n,o);for(let e=0;e<o.length;e++){if("start"==o[e].dataset.tabButton){r=e;break}""==o[e].dataset.tabButton&&(r=0)}o[r].classList.add("active"),n[r].classList.add("active"),o.forEach(((t,r)=>{t.addEventListener("click",(c=>{e(n,o),function(e,t){e.classList.add("active"),t.classList.add("active")}(n[r],t)}))}))}(t)))})(),(()=>{const e=document.querySelectorAll(".popup-link"),t=document.querySelector("body"),o=document.querySelectorAll(".lock-padding");let n=!0;for(let t=0;t<e.length;t++){const o=e[t];o.addEventListener("click",(function(e){const t=o.getAttribute("href").replace("#","");c(document.getElementById(t)),e.preventDefault()}))}const r=document.querySelectorAll(".popup__close");for(let e=0;e<r.length;e++){const t=r[e];t.addEventListener("click",(function(e){a(t.closest(".popup")),e.preventDefault()}))}function c(e){if(e&&n){const r=document.querySelector(".popup.open");r?a(r,!1):function(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";for(let t=0;t<o.length;t++)o[t].style.paddingRight=e;t.style.paddingRight=e,t.classList.add("popup-lock"),n=!1,setTimeout((function(){n=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__body")||a(e.target.closest(".popup"))}))}}function a(e,r=!0){n&&(e.classList.remove("open"),r&&(setTimeout((function(){for(let e=0;e<o.length;e++)o[e].style.paddingRight="0px";t.style.paddingRight="0px",t.classList.remove("popup-lock")}),800),n=!1,setTimeout((function(){n=!0}),800)))}document.addEventListener("keydown",(function(e){"Escape"===e.key&&a(document.querySelector(".popup.open"))})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msmatchesSelector)})(),document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".product__btn"),t=document.querySelector(".cart").querySelector(".cart__quantity"),o=document.querySelector(".cart-body__clear"),n=document.querySelector(".finalprice__value");let r=0;o&&o.addEventListener("click",(function(e){const t=document.querySelectorAll(".cart-body__product"),o=document.querySelector(".cart-body");t.forEach((e=>{o.classList.add("cart-empty"),e.remove(),localStorage.removeItem("products"),i()}))}));let c=document.querySelector(".cart-body__content");c&&c.addEventListener("click",(function(e){let t=e.target;if(t.closest(".product")){let e=t.closest(".product"),o=e.querySelector(".product__close");if(t==o){d(e),e.remove();let t=document.querySelectorAll(".product__body-sum");r=0,t.forEach((e=>{r+=+e.textContent})),a()}let c=e.querySelector(".quantity__value").textContent,s=e.querySelector(".product__body-sum"),i=l(e.querySelector(".product__body-rate").textContent),u=i*c,p=e.querySelector(".quantity__btn-up"),m=e.querySelector(".quantity__btn-down"),y=localStorage.getItem("products");if(t==p||t==m){let e;s.innerHTML=" "+u+" ";let o=t.closest(".product").dataset.id,n=(new DOMParser).parseFromString(y,"text/html").querySelectorAll(".product");n.forEach((e=>{e.dataset.id==o&&(e.innerHTML=t.closest(".product").innerHTML)})),e=[],n.forEach((t=>{e.push(t.outerHTML)}));const r=e.reduce(((e,t)=>e+t));r.trim(),r.length&&localStorage.setItem("products",r)}t==p&&(n.textContent=+n.textContent+ +i),t==m&&(n.textContent=+n.textContent-+i)}const o=c.querySelectorAll(".product"),s=document.querySelector(".cart-body");0==o.length?s.classList.add("cart-empty"):s.classList.remove("cart-empty")})),-1!==document.URL.toString().indexOf("cart")&&window.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".product__body-sum").forEach((e=>{r+=+e.textContent})),a()}));const a=()=>{n.innerHTML=r},l=e=>e.replace(/\s/g,"");let s=0;const i=()=>{if(null!==localStorage.getItem("products")){let e=localStorage.getItem("products"),o=(new DOMParser).parseFromString(e,"text/html").querySelectorAll(".product");t.classList.add("active"),t.innerHTML=o.length}null!=localStorage.getItem("products")&&""!=localStorage.getItem("products").trim()||t.classList.remove("active")},d=e=>{let t=e.dataset.id;const o=localStorage.getItem("products");let n=(new DOMParser).parseFromString(o,"text/html"),r=n.querySelectorAll(".product");r&&r.forEach((e=>{e.dataset.id==t&&e.remove()}));let c=n.body.innerHTML;c.length?(localStorage.removeItem("products"),localStorage.setItem("products",c)):localStorage.removeItem("products"),i()};e.forEach((e=>{e.closest(".product").setAttribute("data-id",s++),e.addEventListener("click",(e=>{let t=e.currentTarget,o=t.closest(".product"),n=t.closest(".density-tab__content"),r=o.dataset.id,c=((e,t,o,n,r)=>`\n                    <div class="cart-body__product product" data-id="${r}">\n                        <div class="product__image">\n                            <img src="img/product.png" alt="product">\n                        </div>\n                        <div class="product__body">\n                            <div class="product__body-title product-title">\n                                <div class="product-title__designation">\n                                    Политерм\n                                </div>\n                                <div class="product-title__spectification">\n                                    (${e}, ширина ${t} см)\n                                </div>\n\n                            </div>\n                            <div class="product__body-info">\n                                <div class="product__body-quantity quantity">\n                                    <button type="button" class="quantity__btn-down">-</button>\n                                    <div class="quantity__value">${o}</div>\n                                    <button type="button" class="quantity__btn-up">+</button>\n                                </div>\n                                <div class="product__body-price">\n                                    <div class="product__body-sum">\n                                        ${n*o} \n                                    </div>\n                                    <div class="product__body-rate">\n                                        ${n} \n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <button type="button" class="product__close icon-close"></button>\n                     </div>\n            `)(n.querySelector(".density").textContent,o.querySelector(".product__width-value").textContent,o.querySelector(".quantity__value").textContent,o.querySelector(".product__price-value").textContent,r);u(c),i()}))})),(()=>{i();const e=document.querySelector(".cart-body");if(null!==localStorage.getItem("products")&&""!==localStorage.getItem("products").trim()){const t=document.querySelector(".cart-body__content");t&&(e.classList.remove("cart-empty"),t.insertAdjacentHTML("beforeend",localStorage.getItem("products")));let o=localStorage.getItem("products"),n=(new DOMParser).parseFromString(o,"text/html").querySelectorAll(".product");document.querySelectorAll(".products__item").forEach((e=>{n.forEach((t=>{if(t.dataset.id==e.dataset.id){let o=t.querySelector(".quantity__value").textContent;e.querySelector(".quantity__value").innerHTML=o}}))}))}else e&&e.classList.add("cart-empty")})();const u=e=>{if(null!==localStorage.getItem("products")){let t=localStorage.getItem("products"),o=(new DOMParser).parseFromString(t,"text/html"),n=o.querySelectorAll(".product"),r=(new DOMParser).parseFromString(e,"text/html").querySelector(".product").dataset.id;n.forEach((e=>{e.dataset.id==r&&(e.outerHTML="")})),o.body.insertAdjacentHTML("beforeend",e);let c=o.body.innerHTML;localStorage.setItem("products",c)}else localStorage.setItem("products",e)}})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".quantity").forEach((e=>{const t=e.querySelector(".quantity__value"),o=e.querySelector(".quantity__btn-up"),n=e.querySelector(".quantity__btn-down");let r=t.textContent;1==r&&n.classList.add("btn-disabled"),o.addEventListener("click",(e=>{e.preventDefault(),r++,1==r?n.classList.add("btn-disabled"):n.classList.remove("btn-disabled"),t.innerHTML=r})),n.addEventListener("click",(e=>{e.preventDefault(),r--,1==r?n.classList.add("btn-disabled"):n.classList.remove("btn-disabled"),t.innerHTML=r}))}))})),(()=>{async function e(e){const r=e.target;e.preventDefault();let c=function(e){let r=0,c=e.querySelectorAll("._req");for(let e=0;e<c.length;e++){const a=c[e];o(a),a.classList.contains("_phone")?n(a)||(t(a),r++):""===a.value&&(t(a),r++)}return r}(r);if(0===c){let e=[];const t=e=>e.replace(/\s/g,"");let o=document.querySelectorAll(".cart-body__product");if(o&&o.forEach((o=>{o={title:t(o.querySelector(".product-title").textContent),quantity:t(o.querySelector(".quantity__value").textContent),price:t(o.querySelector(".product__body-sum").textContent)},e.push(o)})),document.querySelector(".finalprice__value")){const o={final:t(document.querySelector(".finalprice__value").textContent)};e.push(o)}let n=new FormData(r),c=r.querySelector('[name="name"]').value,a=r.querySelector('[name="phone"]').value;if(r.querySelector('[name="adress"]')){let e=r.querySelector('[name="adress"]').value;n.append("Адрес",e)}if(r.querySelector('[name="message"]')){let e=r.querySelector('[name="message"]').value;n.append("Сообщение",e)}o&&n.append("Товары",JSON.stringify(e)),n.append("Имя",c),n.append("Телефон",a);let l=new XMLHttpRequest;l.onreadystatechange=function(){4===l.readyState&&200===l.status&&alert("Успешно!")},l.open("POST","mail.php",!0),l.send(n),r.reset()}else alert("Заполните обязательные поля")}function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function o(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function n(e){return/^\d[\d\(\)\ -]{4,14}\d$/.test(e.value)}document.querySelectorAll("form").forEach((t=>{t.addEventListener("submit",e)}))})(),(()=>{function e(e){this.type=e}e.prototype.init=function(){const e=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let e=0;e<this.nodes.length;e++){const t=this.nodes[e],o=t.dataset.da.trim().split(","),n={};n.element=t,n.parent=t.parentNode,n.destination=document.querySelector(o[0].trim()),n.breakpoint=o[1]?o[1].trim():"767",n.place=o[2]?o[2].trim():"last",n.index=this.indexInParent(n.parent,n.element),this.оbjects.push(n)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(e){return"("+this.type+"-width: "+e.breakpoint+"px),"+e.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(e,t,o){return Array.prototype.indexOf.call(o,e)===t}));for(let t=0;t<this.mediaQueries.length;t++){const o=this.mediaQueries[t],n=String.prototype.split.call(o,","),r=window.matchMedia(n[0]),c=n[1],a=Array.prototype.filter.call(this.оbjects,(function(e){return e.breakpoint===c}));r.addListener((function(){e.mediaHandler(r,a)})),this.mediaHandler(r,a)}},e.prototype.mediaHandler=function(e,t){if(e.matches)for(let e=0;e<t.length;e++){const o=t[e];o.index=this.indexInParent(o.parent,o.element),this.moveTo(o.place,o.element,o.destination)}else for(let e=0;e<t.length;e++){const o=t[e];o.element.classList.contains(this.daClassname)&&this.moveBack(o.parent,o.element,o.index)}},e.prototype.moveTo=function(e,t,o){t.classList.add(this.daClassname),"last"===e||e>=o.children.length?o.insertAdjacentElement("beforeend",t):"first"!==e?o.children[e].insertAdjacentElement("beforebegin",t):o.insertAdjacentElement("afterbegin",t)},e.prototype.moveBack=function(e,t,o){t.classList.remove(this.daClassname),void 0!==e.children[o]?e.children[o].insertAdjacentElement("beforebegin",t):e.insertAdjacentElement("beforeend",t)},e.prototype.indexInParent=function(e,t){const o=Array.prototype.slice.call(e.children);return Array.prototype.indexOf.call(o,t)},e.prototype.arraySort=function(e){"min"===this.type?Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?-1:"last"===e.place||"first"===t.place?1:e.place-t.place:e.breakpoint-t.breakpoint})):Array.prototype.sort.call(e,(function(e,t){return e.breakpoint===t.breakpoint?e.place===t.place?0:"first"===e.place||"last"===t.place?1:"last"===e.place||"first"===t.place?-1:t.place-e.place:t.breakpoint-e.breakpoint}))},new e("max").init()})(),$("[data-goto]").on("click",(function(e){e.preventDefault();let t=$(e.target).attr("href").replace("#",".");return $("html, body").animate({scrollTop:$(t).offset().top-$(".header__body")[0].scrollHeight},1e3),!1}));const e=document.querySelector(".tabs__arrow"),t=document.querySelector(".tabs__buttons");e&&t.addEventListener("click",(function(o){e.classList.toggle("active"),t.classList.toggle("active")}));const o=document.querySelectorAll(".company-item");if(o.length>0){const e=document.querySelector(".prev"),t=document.querySelector(".next");let n=0;function r(e){for(let e=0;e<o.length;e++)o[e].classList.remove("open");o[e].classList.add("open")}e.addEventListener("click",(function(){0==n?(n=o.length-1,r(n)):(n--,r(n))})),t.addEventListener("click",(function(){n==o.length-1?(n=0,r(n)):(n++,r(n))}))}const n=document.querySelector(".header");new IntersectionObserver((function(e,t){e[0].isIntersecting?n.classList.remove("scroll"):n.classList.add("scroll")})).observe(n),document.querySelectorAll(".anim").forEach((e=>{new IntersectionObserver((function(t,o){t[0].isIntersecting&&e.classList.add("active")})).observe(e)}));let r=$(".company__times");if(r){r.slick({arrows:!1,slidesToScroll:1,vertical:!0,verticalSwiping:!0,slidesToShow:2,infinite:!1});const e=document.querySelector(".company__body-pc");if(e){const t=e.querySelectorAll(".company-item__year");r.on("wheel",(function(e){e.preventDefault(),e.originalEvent.deltaY>0?($(this).slick("slickNext"),t.forEach((e=>{let t=e.dataset.id,o=document.querySelector(t);e.classList.contains("slick-current")?o.classList.add("visible"):o.classList.remove("visible")}))):($(this).slick("slickPrev"),t.forEach((e=>{let t=e.dataset.id,o=document.querySelector(t);e.classList.contains("slick-current")?o.classList.add("visible"):o.classList.remove("visible")})))}))}}})();