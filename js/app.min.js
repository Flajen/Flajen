(()=>{"use strict";!function(t){let e=new Image;e.onload=e.onerror=function(){1==(2==e.height)?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}(),(()=>{const t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};t.any()?document.body.classList.add("_touch"):document.body.classList.add("_pc")})(),(()=>{const t=document.querySelector(".icon-menu"),e=document.querySelector(".menu__body"),o=document.querySelector(".header__wrapper");t&&t.addEventListener("click",(function(n){document.body.classList.toggle("lock"),o.classList.toggle("active"),t.classList.toggle("active"),e.classList.toggle("active")}))})(),(()=>{function t(t,e){e.forEach((t=>{t.classList.remove("active")})),t.forEach((t=>{t.classList.remove("active")}))}document.querySelectorAll("[data-tabs]").forEach((e=>function(e){const o=e.querySelectorAll("[data-tab-button]"),n=e.querySelectorAll("[data-tab-content]");let r;t(n,o);for(let t=0;t<o.length;t++){if("start"==o[t].dataset.tabButton){r=t;break}""==o[t].dataset.tabButton&&(r=0)}o[r].classList.add("active"),n[r].classList.add("active"),o.forEach(((e,r)=>{e.addEventListener("click",(c=>{t(n,o),function(t,e){t.classList.add("active"),e.classList.add("active")}(n[r],e)}))}))}(e)))})(),(()=>{const t=document.querySelectorAll(".popup-link"),e=document.querySelector("body"),o=document.querySelectorAll(".lock-padding");let n=!0;for(let e=0;e<t.length;e++){const o=t[e];o.addEventListener("click",(function(t){const e=o.getAttribute("href").replace("#","");c(document.getElementById(e)),t.preventDefault()}))}const r=document.querySelectorAll(".popup__close");for(let t=0;t<r.length;t++){const e=r[t];e.addEventListener("click",(function(t){l(e.closest(".popup")),t.preventDefault()}))}function c(t){if(t&&n){const r=document.querySelector(".popup.open");r?l(r,!1):function(){const t=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";for(let e=0;e<o.length;e++)o[e].style.paddingRight=t;e.style.paddingRight=t,e.classList.add("popup-lock"),n=!1,setTimeout((function(){n=!0}),800)}(),t.classList.add("open"),t.addEventListener("click",(function(t){t.target.closest(".popup__body")||l(t.target.closest(".popup"))}))}}function l(t,r=!0){n&&(t.classList.remove("open"),r&&(setTimeout((function(){for(let t=0;t<o.length;t++)o[t].style.paddingRight="0px";e.style.paddingRight="0px",e.classList.remove("popup-lock")}),800),n=!1,setTimeout((function(){n=!0}),800)))}document.addEventListener("keydown",(function(t){"Escape"===t.key&&l(document.querySelector(".popup.open"))})),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msmatchesSelector)})(),document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelectorAll(".product__btn"),e=document.querySelector(".cart").querySelector(".cart__quantity"),o=document.querySelector(".cart-body__clear"),n=document.querySelector(".finalprice__value");let r=0;o&&o.addEventListener("click",(function(t){const e=document.querySelectorAll(".cart-body__product"),o=document.querySelector(".cart-body");e.forEach((t=>{o.classList.add("cart-empty"),t.remove(),localStorage.removeItem("products"),i()}))}));let c=document.querySelector(".cart-body__content");c&&c.addEventListener("click",(function(t){let e=t.target;if(e.closest(".product")){let t=e.closest(".product"),o=t.querySelector(".product__close");if(e==o){u(t),t.remove();let e=document.querySelectorAll(".product__body-sum");r=0,e.forEach((t=>{r+=+t.textContent})),l()}let c=t.querySelector(".quantity__value").textContent,s=t.querySelector(".product__body-sum"),i=a(t.querySelector(".product__body-rate").textContent),d=i*c,p=t.querySelector(".quantity__btn-up"),y=t.querySelector(".quantity__btn-down"),m=localStorage.getItem("products");if(e==p||e==y){let t;s.innerHTML=" "+d+" ";let o=e.closest(".product").dataset.id,n=(new DOMParser).parseFromString(m,"text/html").querySelectorAll(".product");n.forEach((t=>{t.dataset.id==o&&(t.innerHTML=e.closest(".product").innerHTML)})),t=[],n.forEach((e=>{t.push(e.outerHTML)}));const r=t.reduce(((t,e)=>t+e));r.trim(),r.length&&localStorage.setItem("products",r)}e==p&&(n.textContent=+n.textContent+ +i),e==y&&(n.textContent=+n.textContent-+i)}const o=c.querySelectorAll(".product"),s=document.querySelector(".cart-body");0==o.length?s.classList.add("cart-empty"):s.classList.remove("cart-empty")})),-1!==document.URL.toString().indexOf("cart")&&window.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".product__body-sum").forEach((t=>{r+=+t.textContent})),l()}));const l=()=>{n.innerHTML=r},a=t=>t.replace(/\s/g,"");let s=0;const i=()=>{if(null!==localStorage.getItem("products")){let t=localStorage.getItem("products"),o=(new DOMParser).parseFromString(t,"text/html").querySelectorAll(".product");e.classList.add("active"),e.innerHTML=o.length}null!=localStorage.getItem("products")&&""!=localStorage.getItem("products").trim()||e.classList.remove("active")},d=(t,e,o,n,r)=>`\n                    <div class="cart-body__product product" data-id="${r}">\n                        <div class="product__image">\n                            <img src="img/product.png" alt="product">\n                        </div>\n                        <div class="product__body">\n                            <div class="product__body-title product-title">\n                                <div class="product-title__designation">\n                                    Политерм\n                                </div>\n                                <div class="product-title__spectification">\n                                    (${t}, ширина ${e} см)\n                                </div>\n\n                            </div>\n                            <div class="product__body-info">\n                                <div class="product__body-quantity quantity">\n                                    <button type="button" class="quantity__btn-down">-</button>\n                                    <div class="quantity__value">${o}</div>\n                                    <button type="button" class="quantity__btn-up">+</button>\n                                </div>\n                                <div class="product__body-price">\n                                    <div class="product__body-sum">\n                                        ${n*o} \n                                    </div>\n                                    <div class="product__body-rate">\n                                        ${n} \n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <button type="button" class="product__close icon-close"></button>\n                     </div>\n            `,u=t=>{let e=t.dataset.id;const o=localStorage.getItem("products");let n=(new DOMParser).parseFromString(o,"text/html"),r=n.querySelectorAll(".product");r&&r.forEach((t=>{t.dataset.id==e&&t.remove()}));let c=n.body.innerHTML;c.length?(localStorage.removeItem("products"),localStorage.setItem("products",c)):localStorage.removeItem("products"),i()};t.forEach((t=>{t.closest(".product").setAttribute("data-id",s++),t.addEventListener("click",(t=>{let e=t.currentTarget,o=e.closest(".product"),n=e.closest(".density-tab__content"),r=o.dataset.id,c=n.querySelector(".density").textContent,l=o.querySelector(".product__width-value").textContent,a=o.querySelector(".quantity__value").textContent,s=o.querySelector(".product__price-value").textContent,u=d(c,l,a,s,r);y(u),i(),o.classList.add("checked"),e.classList.add("checked"),p()}))}));const p=()=>{let t=document.querySelectorAll(".product.checked");t&&t.forEach((t=>{t.querySelector(".quantity").addEventListener("click",(function(e){const o=e.target;if(t.querySelector(".product__btn"),o==t.querySelector(".quantity__btn-down")){u(t);let e=t.closest(".density-tab__content"),o=t.dataset.id,n=e.querySelector(".density").textContent,r=t.querySelector(".product__width-value").textContent,c=t.querySelector(".quantity__value").textContent,l=t.querySelector(".product__price-value").textContent,a=d(n,r,c,l,o);y(a),i()}if(o==t.querySelector(".quantity__btn-up")){u(t);let e=t.closest(".density-tab__content"),o=t.dataset.id,n=e.querySelector(".density").textContent,r=t.querySelector(".product__width-value").textContent,c=t.querySelector(".quantity__value").textContent,l=t.querySelector(".product__price-value").textContent,a=d(n,r,c,l,o);y(a),i()}}))}))};(()=>{i();const t=document.querySelector(".cart-body");if(null!==localStorage.getItem("products")&&""!==localStorage.getItem("products").trim()){const e=document.querySelector(".cart-body__content");e&&(t.classList.remove("cart-empty"),e.insertAdjacentHTML("beforeend",localStorage.getItem("products")));let o=localStorage.getItem("products"),n=(new DOMParser).parseFromString(o,"text/html").querySelectorAll(".product");document.querySelectorAll(".products__item").forEach((t=>{n.forEach((e=>{if(e.dataset.id==t.dataset.id){t.classList.add("checked");let o=t.querySelector(".product__btn");o&&o.classList.add("checked");let n=e.querySelector(".quantity__value").textContent;t.querySelector(".quantity__value").innerHTML=n}}))}))}else t&&t.classList.add("cart-empty");p()})();const y=t=>{if(null!==localStorage.getItem("products")){let e=localStorage.getItem("products"),o=(new DOMParser).parseFromString(e,"text/html"),n=o.querySelectorAll(".product"),r=(new DOMParser).parseFromString(t,"text/html").querySelector(".product").dataset.id;n.forEach((t=>{t.dataset.id==r&&(t.outerHTML="")})),o.body.insertAdjacentHTML("beforeend",t);let c=o.body.innerHTML;localStorage.setItem("products",c)}else localStorage.setItem("products",t)}})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".quantity").forEach((t=>{const e=t.querySelector(".quantity__value"),o=t.querySelector(".quantity__btn-up"),n=t.querySelector(".quantity__btn-down");let r=e.textContent;1==r&&n.classList.add("btn-disabled"),o.addEventListener("click",(t=>{t.preventDefault(),r++,1==r?n.classList.add("btn-disabled"):n.classList.remove("btn-disabled"),e.innerHTML=r})),n.addEventListener("click",(t=>{t.preventDefault(),r--,1==r?n.classList.add("btn-disabled"):n.classList.remove("btn-disabled"),e.innerHTML=r}))}))})),(()=>{async function t(t){const r=t.target;t.preventDefault();let c=function(t){let r=0,c=t.querySelectorAll("._req");for(let t=0;t<c.length;t++){const l=c[t];o(l),l.classList.contains("_phone")?n(l)||(e(l),r++):""===l.value&&(e(l),r++)}return r}(r);if(0===c){let t=[];const e=t=>t.replace(/\s/g,"");let o=document.querySelectorAll(".cart-body__product");if(o&&o.forEach((o=>{o={title:e(o.querySelector(".product-title").textContent),quantity:e(o.querySelector(".quantity__value").textContent),price:e(o.querySelector(".product__body-sum").textContent)},t.push(o)})),document.querySelector(".finalprice__value")){const o={final:e(document.querySelector(".finalprice__value").textContent)};t.push(o)}let n=new FormData(r),c=r.querySelector('[name="name"]').value,l=r.querySelector('[name="phone"]').value;if(r.querySelector('[name="adress"]')){let t=r.querySelector('[name="adress"]').value;n.append("Адрес",t)}if(r.querySelector('[name="message"]')){let t=r.querySelector('[name="message"]').value;n.append("Сообщение",t)}o&&n.append("Товары",JSON.stringify(t)),n.append("Имя",c),n.append("Телефон",l);let a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&alert("Успешно!")},a.open("POST","mail.php",!0),a.send(n),r.reset()}else alert("Заполните обязательные поля")}function e(t){t.parentElement.classList.add("_error"),t.classList.add("_error")}function o(t){t.parentElement.classList.remove("_error"),t.classList.remove("_error")}function n(t){return/^\d[\d\(\)\ -]{4,14}\d$/.test(t.value)}document.querySelectorAll("form").forEach((e=>{e.addEventListener("submit",t)}))})(),(()=>{function t(t){this.type=t}t.prototype.init=function(){const t=this;this.оbjects=[],this.daClassname="_dynamic_adapt_",this.nodes=document.querySelectorAll("[data-da]");for(let t=0;t<this.nodes.length;t++){const e=this.nodes[t],o=e.dataset.da.trim().split(","),n={};n.element=e,n.parent=e.parentNode,n.destination=document.querySelector(o[0].trim()),n.breakpoint=o[1]?o[1].trim():"767",n.place=o[2]?o[2].trim():"last",n.index=this.indexInParent(n.parent,n.element),this.оbjects.push(n)}this.arraySort(this.оbjects),this.mediaQueries=Array.prototype.map.call(this.оbjects,(function(t){return"("+this.type+"-width: "+t.breakpoint+"px),"+t.breakpoint}),this),this.mediaQueries=Array.prototype.filter.call(this.mediaQueries,(function(t,e,o){return Array.prototype.indexOf.call(o,t)===e}));for(let e=0;e<this.mediaQueries.length;e++){const o=this.mediaQueries[e],n=String.prototype.split.call(o,","),r=window.matchMedia(n[0]),c=n[1],l=Array.prototype.filter.call(this.оbjects,(function(t){return t.breakpoint===c}));r.addListener((function(){t.mediaHandler(r,l)})),this.mediaHandler(r,l)}},t.prototype.mediaHandler=function(t,e){if(t.matches)for(let t=0;t<e.length;t++){const o=e[t];o.index=this.indexInParent(o.parent,o.element),this.moveTo(o.place,o.element,o.destination)}else for(let t=0;t<e.length;t++){const o=e[t];o.element.classList.contains(this.daClassname)&&this.moveBack(o.parent,o.element,o.index)}},t.prototype.moveTo=function(t,e,o){e.classList.add(this.daClassname),"last"===t||t>=o.children.length?o.insertAdjacentElement("beforeend",e):"first"!==t?o.children[t].insertAdjacentElement("beforebegin",e):o.insertAdjacentElement("afterbegin",e)},t.prototype.moveBack=function(t,e,o){e.classList.remove(this.daClassname),void 0!==t.children[o]?t.children[o].insertAdjacentElement("beforebegin",e):t.insertAdjacentElement("beforeend",e)},t.prototype.indexInParent=function(t,e){const o=Array.prototype.slice.call(t.children);return Array.prototype.indexOf.call(o,e)},t.prototype.arraySort=function(t){"min"===this.type?Array.prototype.sort.call(t,(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?-1:"last"===t.place||"first"===e.place?1:t.place-e.place:t.breakpoint-e.breakpoint})):Array.prototype.sort.call(t,(function(t,e){return t.breakpoint===e.breakpoint?t.place===e.place?0:"first"===t.place||"last"===e.place?1:"last"===t.place||"first"===e.place?-1:e.place-t.place:e.breakpoint-t.breakpoint}))},new t("max").init()})(),$("[data-goto]").on("click",(function(t){t.preventDefault();let e=$(t.target).attr("href").replace("#",".");return $("html, body").animate({scrollTop:$(e).offset().top-$(".header__body")[0].scrollHeight},1e3),!1}));const t=document.querySelector(".tabs__arrow"),e=document.querySelector(".tabs__buttons");t&&e.addEventListener("click",(function(o){t.classList.toggle("active"),e.classList.toggle("active")}));const o=document.querySelectorAll(".company-item");if(o.length>0){const t=document.querySelector(".prev"),e=document.querySelector(".next");let n=0;function r(t){for(let t=0;t<o.length;t++)o[t].classList.remove("open");o[t].classList.add("open")}t.addEventListener("click",(function(){0==n?(n=o.length-1,r(n)):(n--,r(n))})),e.addEventListener("click",(function(){n==o.length-1?(n=0,r(n)):(n++,r(n))}))}const n=document.querySelector(".header");new IntersectionObserver((function(t,e){t[0].isIntersecting?n.classList.remove("scroll"):n.classList.add("scroll")})).observe(n),document.querySelectorAll(".anim").forEach((t=>{new IntersectionObserver((function(e,o){e[0].isIntersecting&&t.classList.add("active")})).observe(t)}));let r=$(".company__times");if(r){r.slick({arrows:!1,slidesToScroll:1,vertical:!0,verticalSwiping:!1,slidesToShow:2,infinite:!1});const t=document.querySelector(".company__body-pc");if(t){const e=t.querySelectorAll(".company-item__year");r.on("wheel",(function(o){o.preventDefault(),o.originalEvent.deltaY>0?($(this).slick("slickNext"),e.forEach((e=>{let o=e.dataset.id,n=document.querySelector(o);e.classList.contains("slick-current")?("#time6"==o&&t.classList.add("lock-scroll"),n.classList.add("visible")):n.classList.remove("visible")}))):($(this).slick("slickPrev"),e.forEach((e=>{let o=e.dataset.id,n=document.querySelector(o);e.classList.contains("slick-current")?("#time1"==o&&t.classList.add("lock-scroll"),n.classList.add("visible")):n.classList.remove("visible")})))})),window.addEventListener("scroll",(()=>{t.classList.remove("lock-scroll")}))}}})();